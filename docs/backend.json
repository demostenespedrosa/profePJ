
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "streakDays": {
          "type": "number",
          "description": "The number of consecutive days the user has been actively managing their finances in the app.",
          "default": 0
        },
        "xpTotal": {
          "type": "number",
          "description": "The user's total experience points in the app (for gamification).",
          "default": 0
        },
        "dasDueDate": {
          "type": "number",
          "description": "The day of the month the user's DAS tax is due."
        }
      },
      "required": ["name", "email", "dasDueDate"]
    },
    "Institution": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Institution",
      "type": "object",
      "description": "Represents an institution (e.g., school) where the user teaches.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the institution."
        },
        "hourlyRate": {
          "type": "number",
          "description": "The user's hourly rate at this institution."
        },
        "color": {
          "type": "string",
          "description": "A color to identify the institution in the UI."
        },
        "recessStart": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of the school's recess period."
        },
        "recessEnd": {
          "type": "string",
          "format": "date-time",
          "description": "The end date of the school's recess period."
        }
      },
      "required": ["name", "hourlyRate", "color"]
    },
    "Lesson": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lesson",
      "type": "object",
      "description": "Represents a single lesson taught by the user.",
      "properties": {
        "institutionId": {
          "type": "string",
          "description": "Reference to Institution."
        },
        "institutionName": {
          "type": "string",
          "description": "Denormalized institution name for faster display."
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the lesson.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the lesson.",
          "format": "date-time"
        },
        "totalValue": {
          "type": "number",
          "description": "The total value of the lesson (hourly rate * duration)."
        },
        "status": {
          "type": "string",
          "description": "The status of the lesson (e.g., 'Scheduled', 'Completed', 'Cancelled')."
        },
        "turma": {
          "type": "string",
          "description": "The class/group for the lesson."
        },
        "disciplina": {
          "type": "string",
          "description": "The subject of the lesson."
        }
      },
      "required": [
        "institutionId",
        "institutionName",
        "startTime",
        "endTime",
        "totalValue",
        "status"
      ]
    },
    "Pot": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Pot",
      "type": "object",
      "description": "Represents a virtual 'pot' for saving money towards specific goals.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the pot (e.g., 'Vacation Fund')."
        },
        "type": {
          "type": "string",
          "description": "The type of pot (e.g., 'Mandatory', 'Dream')."
        },
        "virtualBalance": {
          "type": "number",
          "description": "The current virtual balance of the pot."
        },
        "goal": {
          "type": "number",
          "description": "The goal amount for the pot."
        },
        "allocationPercentage": {
          "type": "number",
          "description": "The percentage of each lesson's earnings allocated to this pot."
        },
        "deadline": {
          "type": "string",
          "format": "date-time",
          "description": "The deadline to reach the pot's goal."
        }
      },
      "required": ["name", "type", "virtualBalance", "goal", "allocationPercentage"]
    },
    "MonthlyObligation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MonthlyObligation",
      "type": "object",
      "description": "Represents the user's monthly tax obligation (DAS).",
      "properties": {
        "monthRef": {
          "type": "string",
          "description": "The month and year the obligation is for (e.g., 'November/2025')."
        },
        "totalRevenue": {
          "type": "number",
          "description": "The user's total revenue for the month."
        },
        "estimatedTaxValue": {
          "type": "number",
          "description": "The estimated value of the DAS tax for the month."
        },
        "status": {
          "type": "string",
          "description": "The status of the DAS payment (e.g., 'Pending', 'Paid', 'Overdue')."
        },
        "paymentDate": {
          "type": "string",
          "format": "date-time",
          "description": "The date the DAS was paid."
        }
      },
      "required": ["monthRef", "totalRevenue", "estimatedTaxValue", "status"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores public-facing profile data for a user."
    },
    "/users/{userId}/institutions/{institutionId}": {
      "schema": { "$ref": "#/entities/Institution" },
      "description": "Represents an institution where the user teaches."
    },
    "/users/{userId}/lessons/{lessonId}": {
      "schema": { "$ref": "#/entities/Lesson" },
      "description": "Represents a single lesson taught by the user."
    },
    "/users/{userId}/pots/{potId}": {
      "schema": { "$ref": "#/entities/Pot" },
      "description": "Represents a virtual 'pot' for saving money."
    },
    "/users/{userId}/monthly_obligations/{obligationId}": {
      "schema": { "$ref": "#/entities/MonthlyObligation" },
      "description": "Represents the user's monthly tax obligation (DAS)."
    }
  }
}
